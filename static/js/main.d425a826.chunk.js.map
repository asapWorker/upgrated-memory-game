{"version":3,"sources":["constants.js","store/gameSlice.js","functions.js","components/menu/Menu.jsx","components/item/Item.jsx","components/board/Board.jsx","components/wrapper/Wrapper.jsx","components/game/Game.jsx","store/assistantSlice.js","App.jsx","store/index.js","index.js"],"names":["PATH","process","EASY","MIDDLE","HARD","LOADING","LOADED","PAUSE_END","COUNTDOWN","COUNTDOWN_END","ACTIVITY","READY","FINISH","COUNTDOWN_DELAY","COUNTDOWN_NUM","UNMARKED","CORRECT","WRONG","VISIBLE","INVISIBLE","LIST_LEN","_LIST_LEN","Object","defineProperty","SIMILAR_NUM","_SIMILAR_NUM","SHOW_MENU","START_GAME","FINISH_GAME","RESTART_GAME","PERMIT_CHOOSING","DENY_FINISHING","CHOOSE_ITEM","NO_ITEM","assistantObj","ref","gameSlice","createSlice","name","initialState","level","gameId","step","prevStep","undefined","reducers","startGame","state","action","payload","Date","now","restartGame","finishLoading","makePause","finishPause","makeCountdown","finishCountdown","startActivity","setReady","finishGame","setInitResult","result","changeResult","_gameSlice$actions","actions","getPercentageResult","Math","round","random","start","end","floor","generateList","_step","listLength","sameNum","generateSameItemsNum","repeatedItem","list","Array","fill","_iterator","_createForOfIteratorHelper","randomSeveral","s","n","done","value","err","e","f","similarIndexes","similarInd","similarItem","otherItem","SIMILAR_IMG_END","i","includes","repeatedItemNum","num","Set","generatedNum","has","add","from","getDifferentElemsNumOfTwoArrays","arr1","arr2","length","len","min","notSameElemsNum","max","considerRowsColsCount","itemsNum","screenOrientation","cols","rows","_ref2","_remoteControllerDeco","window","screen","orientation","type","btnList","enabledBtnList","currentElem","currentElemAmongEnabled","disabledFocusedElem","boardBtnNum","moveHandler","event","code","getNextVerticalElem","getNextHorizonElem","focus","removeFocusFromDisabledBtn","classList","remove","splice","indexOf","direction","nextElemAmongEnabled","nextElem","_btnList2","lastIsDisabled","arguments","boardItemsNum","blur","_btnList","_considerRowsColsCoun","_considerRowsColsCoun2","slicedToArray","push","apply","toConsumableArray","document","querySelectorAll","pop","map","_","index","addEventListener","btnInd","focused","onchange","currentScreenOrientation","_ref","remoteControllerDecorator","_remoteControllerDeco2","setRemoteControllerConfig","addLastBtnInEnabledBtnList","checkBoardBtn","orientationChangeHandler","Menu","props","dispatch","useDispatch","assistantData","useSelector","assistant","data","btnEasy","useRef","btnMiddle","btnHard","startGameHandler","sendData","action_id","current","disabled","changeAppScreen","useEffect","react_default","a","createElement","className","onClick","Item","_useState","useState","_useState2","itemMark","setItemMark","game","gameStep","prevGameStep","Number","imgInd","itemChoosingHandler","imgName","tabIndex","onLoad","imageIsLoaded","isRepeated","Board","itemsList","setItemsList","_useState3","_useState4","unloadedItemsNum","setUnloadedItemsNum","listObj","item","Item_Item","key","decreaseUnloadedImagesNum","concat","prev","wrapperTimerId","Wrapper","_useSelector","countdownStep","setCountdownStep","clearTimeout","setTimeout","title","src","Fragment","_regeneratorRuntime","exports","Op","prototype","hasOwn","hasOwnProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","record","__await","then","unwrapped","error","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","skipTempReset","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","gameTimerId","pause","asyncToGenerator","_callee","_context","_x","Game","restartBtn","menuBtn","resultBtn","restartHandler","menuHandler","resultHandler","Wrapper_Wrapper","Board_Board","assistantSlice","clientAssistant","changeAssistantData","initializeAssistant","getState","createAssistant","App","isMenuScreen","setIsMenuScreen","on","Menu_Menu","Game_Game","store","configureStore","reducer","gameReducer","assistantReducer","root","getElementById","ReactDOM","render","es","src_App"],"mappings":"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","file":"static/js/main.d425a826.chunk.js","sourcesContent":["// images folder path\nexport const PATH = process.env.PUBLIC_URL + \"/images/\";\n\n// game levels\nexport const EASY = 'easy';\nexport const MIDDLE = 'middle';\nexport const HARD = 'hard';\n\n// game working steps\nexport const LOADING = 'loading';\nexport const LOADED = 'loaded';\nexport const PAUSE = 'pause';\nexport const PAUSE_END = 'pause_end';\nexport const COUNTDOWN = 'countdown';\nexport const COUNTDOWN_END = 'countdown_end';\nexport const ACTIVITY = 'activity';\nexport const READY = 'ready';\nexport const FINISH = 'finish';\n\n// time constants for game steps\nexport const PAUSE_TIME = 3000;\nexport const COUNTDOWN_DELAY = 1100;\nexport const COUNTDOWN_NUM = 3;\n\n// items marked and unmarked statuses\nexport const UNMARKED = 'unmarked';\nexport const CORRECT = 'correct';\nexport const WRONG = 'wrong';\n\n// visibility\nexport const VISIBLE = 'visible';\nexport const INVISIBLE = 'invisible';\n\n// possible images count\nexport const GENERAL = 20;\n\n// length of items list depends on level\nexport const LIST_LEN = {\n  [EASY]: 12,\n  [MIDDLE]: 20,\n  [HARD]: 20\n}\n\n// similar images edges in images list\nexport const SIMILAR_IMG_START = 1;\nexport const SIMILAR_IMG_END = 10;\n\n// similar images count\nexport const SIMILAR_NUM = {\n  [EASY]: 0,\n  [MIDDLE]: 4,\n  [HARD]: 9,\n}\n\n// screen orientation\nexport const PORTRAIT = 'portrait-primary';\nexport const LANDSCAPE = 'landscape-primary';\n\n\n// Sber token\nexport const token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZTFmNTQxODM0NzEwNjkyNzAzM2QwYTQ0ODFmMTNkNTJiMTA1N2NhMWNkY2I0OTg0ZGNiMWQxZjQzMzdhMzYyNTM5YmU5MjcwMDQyNjI5OCIsImF1ZCI6IlZQUyIsImV4cCI6MTY3MDkzMzA3NSwiaWF0IjoxNjcwODQ2NjY1LCJpc3MiOiJLRVlNQVNURVIiLCJ0eXBlIjoiQmVhcmVyIiwianRpIjoiZTQzZGU1YWQtNDc4YS00NmYwLTk3OTctOTQwMzRkMDA5ZmQzIiwic2lkIjoiM2Q3NzgwMWYtOGQzMi00NGRjLWE4ZGQtYjcwMTBkZDE4MGNmIn0.cRIsxjhm7-SqrtN3JuqN83UXpNyrzVbeMNzCwg4wh-QuHo2S75YJxVAPKARvY3fCzMBxZT2wgLxouAjKxQG33FHynHvNFKVBAGiFD4q3CvD8QB0uBF3L6-XF14d8sQNRRaKWsiYAQ9ACUn1vV9M1Mjka1uTo1CAwJubF-2GIhQRMnk2pva2uKaOgm7E-UslWA7Rab38ZQ1H0rax6-Quqadd0Xgzgt5IQd0QO4rabKTfMM-H3wtNWlt4pTjbblHR_uVUYnou44ImIkTheGe7DbPwLNl6uDEb_4V-ucLwKXxovpp6TTYSNHk8tdIVm3UUhyEBnnyebFDNE_eCGUXV0mmKZb5PCDWfZQKjDIWPNN22DxDiIAb8LOaNv5lBN4BHgkqhdmbzoUFJJgwnRN_LZMBc7xUmLXgYxBQxwh61XF3Yq_5JAcFgjcYd2tLFmk-aS8T9i3Myl5FmreI33MRuuQ030gjHacWuwLzdUGtvkG4cUZO-p2X7G6DIl65gF0YiyoSpjcp3KsgZPGINUe7v0QegWLhVN_byo3o11-1NetgmxT5bVZwImfqCPZRcRNYGmYCR91K_YI2Ab6eSn85NYXQwettavj3W4_FJGOCVkkCNihMhnS4rQPtJGkC4YfbJRekfqbdLitypAGnGdggSwvZQOHllqboVFLEreuRqMfno';\n\n// client commands\nexport const SHOW_MENU = 'show-menu';\nexport const START_GAME = 'start-game';\nexport const FINISH_GAME = 'finish-game';\nexport const RESTART_GAME = 'restart-game';\nexport const PERMIT_CHOOSING = 'permit-choosing';\nexport const DENY_FINISHING = 'deny-finishing';\nexport const CHOOSE_ITEM = 'choose-item';\nexport const NO_ITEM = 'no-item'\n\n\n// variable for assistant object\nexport const assistantObj = {ref: null};","import {createSlice} from \"@reduxjs/toolkit\";\nimport {\n  LOADING,\n  PAUSE,\n  COUNTDOWN,\n  ACTIVITY,\n  FINISH,\n  CORRECT,\n  READY,\n  LOADED,\n  COUNTDOWN_END,\n  PAUSE_END\n} from \"../constants\";\n\nconst gameSlice = createSlice({\n  name: \"game\",\n\n  initialState: {\n    level: null,\n    gameId: null,\n    step: LOADING,\n\n    prevStep: undefined\n  },\n\n  reducers: {\n    startGame(state, action) {\n      state.level = action.payload;\n      state.gameId = Date.now();\n      state.step = LOADING;\n\n      state.prevStep = undefined;\n    },\n\n    restartGame(state) {\n      state.gameId = Date.now();\n      state.step = LOADING;\n\n      state.prevStep = undefined;\n    },\n\n    finishLoading(state) {\n      state.step = LOADED;\n    },\n\n    makePause(state) {\n      state.prevStep = state.step;\n      state.step = PAUSE;\n    },\n\n    finishPause(state) {\n      state.step = PAUSE_END;\n    },\n\n    makeCountdown(state) {\n      state.prevStep = state.step;\n      state.step = COUNTDOWN;\n    },\n\n    finishCountdown(state) {\n      state.step = COUNTDOWN_END;\n    },\n\n    startActivity(state) {\n      state.prevStep = state.step;\n      state.step = ACTIVITY;\n    },\n\n    setReady(state) {\n      state.step = READY;\n    },\n\n    finishGame(state) {\n      state.step = FINISH;\n    },\n\n    setInitResult(state, action) {\n      state.result = action.payload;\n    },\n\n    changeResult(state, action) {\n      if (action.payload === CORRECT) {\n        state.result += 1;\n      } else {\n        state.result -= 1;\n      }\n    },\n  }\n})\n\nexport default gameSlice.reducer;\nexport const {startGame, restartGame, finishLoading, makePause, finishPause, makeCountdown,finishCountdown, startActivity, setReady, finishGame, setInitResult, changeResult} = gameSlice.actions;","import {\n  EASY,\n  GENERAL,\n  LIST_LEN,\n  MIDDLE,\n  PORTRAIT,\n  SIMILAR_IMG_END,\n  SIMILAR_IMG_START,\n  SIMILAR_NUM\n} from \"./constants\";\n\nexport const getPercentageResult = function(result, level) {\n  const percentageResult = Math.round(result / LIST_LEN[level] * 100);\n\n  return percentageResult;\n}\n\nexport const random = function (start, end) {\n  return Math.floor(Math.random() * (end - start + 1)) + start;\n}\n\n\n\n/* creating items' list\n------------------------------------------------------*/\nexport const generateList = function(level) {\n  const listLength = LIST_LEN[level];\n  const sameNum = generateSameItemsNum(level);\n\n  const repeatedItem = random(SIMILAR_IMG_START, SIMILAR_IMG_END);\n\n  const list = new Array(listLength).fill(null);\n  const sameIndexes = randomSeveral(0, listLength - 1, sameNum);\n\n  for (let ind of sameIndexes) {\n    list[ind] = repeatedItem;\n  }\n\n  const similarIndexes = randomSeveral(0, listLength - sameNum - 1, SIMILAR_NUM[level]);\n\n  let similarInd = 0;\n  let similarItem = repeatedItem;\n  let otherItem = SIMILAR_IMG_END + 1;\n  for (let i = 0; i < listLength; i++) {\n    if (!list[i]) {\n      if (similarIndexes.includes(similarInd)) {\n        similarItem += 1;\n        if (similarItem > SIMILAR_IMG_END) similarItem = 1;\n\n        list[i] = similarItem;\n      } else {\n        list[i] = otherItem;\n\n        otherItem += 1;\n        if (otherItem > GENERAL) otherItem = SIMILAR_IMG_END + 1;\n      }\n\n      similarInd++;\n    }\n  }\n  return {\n    list,\n    repeatedItem,\n    repeatedItemNum: sameNum\n  }\n}\n\nconst randomSeveral = function (start, end, num) {\n  let i = 0;\n  const result = new Set();\n  while (i < num) {\n    const generatedNum = random(start, end);\n    if (!result.has(generatedNum)) {\n      result.add(generatedNum);\n      i++;\n    }\n  }\n  return Array.from(result);\n}\n\n// generate same images number\nconst generateSameItemsNum = function(level) {\n  if (level === EASY) {\n    return random(3, 5)\n  } else if (level === MIDDLE) {\n    return random(6, 7)\n  } else {\n    return random(5, 6)\n  }\n}\n\nexport const getDifferentElemsNumOfTwoArrays = function (arr1, arr2) {\n  if (!arr1.length) return arr2.length;\n  else if (!arr2.length) return arr1.length;\n  else {\n    const len = Math.min(arr1.length, arr2.length);\n    let notSameElemsNum = Math.max(arr1.length, arr2.length) - len;\n\n    for (let i = 0; i < len; i++) {\n      if (arr1[i] !== arr2[i]) notSameElemsNum++;\n    }\n\n    return notSameElemsNum;\n  }\n}\n\n\n/* managing by remote controller\n------------------------------------------------------*/\n\nconst remoteControllerDecorator = function() {\n  let screenOrientation = window.screen.orientation.type;\n\n  let btnList = [];\n  let enabledBtnList = [];\n  let currentElem = -1;\n  let currentElemAmongEnabled = -1;\n  let disabledFocusedElem = null;\n\n  let boardBtnNum = 0;\n  let rows = undefined;\n  let cols = undefined;\n\n\n  const orientationChangeHandler = function() {\n    window.screen.orientation.onchange = () => {\n      const currentScreenOrientation = window.screen.orientation.type;\n      if (rows && currentScreenOrientation !== screenOrientation) {\n        [rows, cols] = [cols, rows];\n      }\n    }\n  }\n\n\n  const setRemoteControllerConfig = function(lastIsDisabled = false, boardItemsNum = 0) {\n    if (currentElem >= 0 && btnList[currentElem]) {\n      btnList[currentElem].blur();\n    }\n\n    disabledFocusedElem = null;\n    btnList = [];\n    if (boardItemsNum) {\n      [rows, cols] = considerRowsColsCount(boardItemsNum, screenOrientation);\n\n      btnList.push(...document.querySelectorAll('.img-btn'));\n    }\n\n    boardBtnNum = boardItemsNum;\n    btnList.push(...document.querySelectorAll('.managing-btn'));\n\n    currentElem = -1;\n    currentElemAmongEnabled = -1;\n\n    enabledBtnList = new Array(btnList.length).fill(0);\n    if (lastIsDisabled) enabledBtnList.pop();\n    enabledBtnList = enabledBtnList.map((_, index) => index);\n\n    document.addEventListener('keydown', moveHandler);\n  }\n\n  const addLastBtnInEnabledBtnList = function() {\n    enabledBtnList.push(btnList.length - 1);\n  }\n\n  const checkBoardBtn = function(btnInd) {\n    if (currentElem >= 0 && btnList[currentElem].focused) btnList[currentElem].blur();\n    if (btnList[disabledFocusedElem]) removeFocusFromDisabledBtn();\n\n    currentElem = btnInd;\n    currentElemAmongEnabled = enabledBtnList.indexOf(btnInd);\n\n    disabledFocusedElem = btnInd;\n    btnList[disabledFocusedElem].classList.add('disabled-focus');\n  }\n\n  const moveHandler = function(event) {\n\n    if (currentElem === -1) {\n      currentElem = 0;\n      currentElemAmongEnabled = 0;\n    } else {\n      switch (event.code) {\n        case 'ArrowDown':\n          getNextVerticalElem(1);\n          break;\n        case 'ArrowUp':\n          getNextVerticalElem(-1);\n          break;\n        case 'ArrowLeft':\n          getNextHorizonElem(-1);\n          break;\n        case 'ArrowRight':\n          getNextHorizonElem(1);\n          break;\n        default:\n          break;\n      }\n    }\n\n    if (!btnList[disabledFocusedElem]) btnList[currentElem].focus();\n  }\n\n  function removeFocusFromDisabledBtn() {\n    btnList[disabledFocusedElem].classList.remove('disabled-focus');\n    enabledBtnList.splice(enabledBtnList.indexOf(disabledFocusedElem), 1);\n\n    currentElemAmongEnabled = enabledBtnList.indexOf(currentElem);\n\n    disabledFocusedElem = null;\n  }\n\n  const getNextHorizonElem = function(direction) {\n    let nextElemAmongEnabled = currentElemAmongEnabled + direction;\n\n    if (nextElemAmongEnabled < 0) {\n      return;\n    } else if (nextElemAmongEnabled >= enabledBtnList.length) {\n      nextElemAmongEnabled = 0;\n    }\n\n    currentElemAmongEnabled = nextElemAmongEnabled;\n    currentElem = enabledBtnList[currentElemAmongEnabled];\n\n    if (btnList[disabledFocusedElem]) removeFocusFromDisabledBtn();\n  }\n\n  const getNextVerticalElem = function(direction) {\n    if (!boardBtnNum) {\n      getNextHorizonElem(direction);\n      return;\n    } else if (currentElem >= boardBtnNum) {\n      getNextHorizonElem(direction);\n      return;\n    }\n\n    let nextElem = currentElem;\n\n    do {\n      nextElem += cols * direction;\n    } while ((nextElem >= 0 && nextElem < boardBtnNum) && !enabledBtnList.includes(nextElem))\n\n    if (nextElem >= boardBtnNum) {\n      currentElem = boardBtnNum;\n      currentElemAmongEnabled = enabledBtnList.indexOf(currentElem);\n    } else if (nextElem >= 0 && nextElem !== currentElem) {\n      currentElem = nextElem;\n      currentElemAmongEnabled = enabledBtnList.indexOf(currentElem);\n    }\n\n    if (btnList[disabledFocusedElem]) removeFocusFromDisabledBtn();\n  }\n\n  return [setRemoteControllerConfig, addLastBtnInEnabledBtnList, checkBoardBtn, orientationChangeHandler];\n}\n\n\nconst considerRowsColsCount = function (itemsNum, screenOrientation) {\n  let cols = 0;\n  let rows = 0\n\n  if (itemsNum === LIST_LEN[EASY]) {\n    cols = 4;\n    rows = 3;\n  } else {\n    cols = 5;\n    rows = 4;\n  }\n\n  if (screenOrientation === PORTRAIT) {\n    [rows, cols] = [cols, rows];\n  }\n\n  return [rows, cols];\n}\n\nexport const [setRemoteControllerConfig, addLastBtnInEnabledBtnList, checkBoardBtn, orientationChangeHandler] = remoteControllerDecorator();\n","import './Menu.css';\nimport React, {useEffect, useRef} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {startGame} from \"../../store/gameSlice\";\nimport {assistantObj, EASY, MIDDLE, HARD, START_GAME} from \"../../constants\";\nimport {setRemoteControllerConfig} from \"../../functions\";\n\nexport function Menu(props) {\n  const dispatch = useDispatch();\n\n  const assistantData = useSelector(state => state.assistant.data);\n\n  const btnEasy = useRef();\n  const btnMiddle = useRef();\n  const btnHard = useRef();\n\n  useEffect(() => {\n    // set remote controller actions\n    setRemoteControllerConfig();\n  }, [])\n\n  useEffect(() => {\n    if (assistantData.type === START_GAME) {\n      startGameHandler(assistantData.payload);\n    }\n  }, [assistantData])\n\n  function startGameHandler(level) {\n    assistantObj.ref.sendData({ action: { action_id: START_GAME}});\n    btnEasy.current.disabled = btnMiddle.current.disabled = btnHard.current.disabled = true;\n    props.changeAppScreen();\n    dispatch(startGame(level));\n  }\n\n\n  return (\n    <div className=\"menu\">\n      <button ref={btnEasy} className=\"btn menu-btn managing-btn\" onClick={() => startGameHandler(EASY)}>Легкий уровень</button>\n      <button ref={btnMiddle} className=\"btn menu-btn managing-btn\" onClick={() => startGameHandler(MIDDLE)}>Средний уровень</button>\n      <button ref={btnHard} className=\"btn menu-btn managing-btn\" onClick={() => startGameHandler(HARD)}>Сложный уровень</button>\n    </div>\n  )\n}","import \"./Item.css\";\nimport React, {useEffect, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n  ACTIVITY,\n  UNMARKED,\n  CORRECT,\n  WRONG,\n  LOADING,\n  PATH,\n  READY, LOADED, COUNTDOWN, CHOOSE_ITEM, assistantObj, NO_ITEM, FINISH\n} from \"../../constants\";\nimport {changeResult, setReady} from \"../../store/gameSlice\";\nimport {checkBoardBtn} from \"../../functions\";\n\nexport function Item(props) {\n  const [itemMark, setItemMark] = useState(UNMARKED);\n\n  const level = useSelector(state => state.game.level);\n  const gameStep = useSelector(state => state.game.step);\n  const prevGameStep = useSelector(state => state.game.prevStep);\n\n  const assistantData = useSelector(state => state.assistant.data);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    setItemMark(UNMARKED);\n  }, [props])\n\n  useEffect(() => {\n    if (itemMark !== UNMARKED) {\n      dispatch(changeResult(itemMark));\n      if (gameStep === ACTIVITY) {\n        dispatch((setReady()));\n      }\n    }\n  }, [itemMark])\n\n  useEffect(() => {\n    if (assistantData.type === CHOOSE_ITEM) {\n      const num = Number(assistantData.payload);\n      if (num === props.imgInd) {\n        if (itemMark === UNMARKED) {\n          itemChoosingHandler();\n        }\n        else {\n          assistantObj.ref.sendData({action: {action_id: NO_ITEM}});\n        }\n      }\n    }\n  }, [assistantData])\n\n  return (\n    <div className={'item level-' + level + ' ' + itemMark}>\n      {(gameStep === LOADING || gameStep === LOADED || (gameStep === COUNTDOWN && prevGameStep === LOADED)) && <div className={'img-wrapper'}/>}\n\n      {(gameStep === FINISH && itemMark !== UNMARKED) && <div className={'img-wrapper finish-step ' + itemMark}/>}\n\n      {\n        (gameStep === ACTIVITY || gameStep === READY) &&\n        <button\n          disabled={(itemMark !== UNMARKED)}\n          className={'btn img-btn'}\n          onClick={itemChoosingHandler}\n        >\n          {props.imgInd}\n        </button>\n      }\n\n      {(!props.imgName) ? null : <object\n        tabIndex={-1}\n        type=\"image/svg+xml\"\n        data={PATH + props.imgName + \".svg\"}\n        className=\"img\"\n        onLoad={props.imageIsLoaded}\n      >\n        smile svg image\n      </object>}\n\n    </div>\n  )\n\n  function itemChoosingHandler() {\n    assistantObj.ref.sendData({action: {action_id: CHOOSE_ITEM}});\n\n    if (props.isRepeated) {\n      setItemMark(CORRECT);\n    } else {\n      setItemMark(WRONG);\n    }\n\n    checkBoardBtn(props.imgInd - 1);\n  }\n}\n","import \"./Board.css\";\nimport React, {useEffect, useRef, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {LIST_LEN} from \"../../constants\";\nimport {generateList, getDifferentElemsNumOfTwoArrays} from \"../../functions\";\nimport {Item} from \"../item/Item\";\nimport {finishLoading, setInitResult} from \"../../store/gameSlice\";\n\nexport function Board() {\n  const level = useSelector(state => state.game.level);\n  const gameId = useSelector(state => state.game.gameId);\n\n  const [itemsList, setItemsList] = useState(new Array(LIST_LEN[level]).fill(null));\n  const [unloadedItemsNum, setUnloadedItemsNum] = useState(-1);\n\n  const list = useRef([]);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const listObj = generateList(level);\n\n    setUnloadedItemsNum(getDifferentElemsNumOfTwoArrays(list.current, listObj.list));\n    list.current = listObj.list;\n\n    setItemsList(listObj.list.map((item, index) => {\n      return (\n        <Item\n          key={index}\n          imgName={item}\n          imgInd={index + 1}\n          isRepeated={item === listObj.repeatedItem}\n          imageIsLoaded={decreaseUnloadedImagesNum}\n        />\n      )\n    }))\n\n    // initialize game result\n    dispatch(setInitResult(LIST_LEN[level] - listObj.repeatedItemNum));\n\n  }, [gameId])\n\n  useEffect(() => {\n    if (!unloadedItemsNum) {\n      dispatch(finishLoading());\n    }\n  }, [unloadedItemsNum])\n\n\n  return (\n    <div className={`board level-${level}`}>\n      {itemsList}\n      </div>\n  )\n\n  function decreaseUnloadedImagesNum() {\n    setUnloadedItemsNum(prev => prev - 1);\n  }\n}","import './Wrapper.css';\nimport React, {useEffect, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n  COUNTDOWN, COUNTDOWN_DELAY,\n  COUNTDOWN_END,\n  COUNTDOWN_NUM,\n  FINISH,\n  INVISIBLE,\n  LOADED,\n  LOADING, PAUSE_END,\n  VISIBLE\n} from \"../../constants\";\nimport {finishCountdown, makeCountdown} from \"../../store/gameSlice\";\nimport {getPercentageResult} from \"../../functions\";\n\n// id for setTimeout\nlet wrapperTimerId = null;\n\nexport function Wrapper() {\n  const {level, step: gameStep, result, gameId} = useSelector(state => state.game);\n  const dispatch = useDispatch();\n\n  const [countdownStep, setCountdownStep] = useState(-1);\n\n  useEffect(() => {\n    return () => {\n      if (wrapperTimerId) clearTimeout(wrapperTimerId);\n      setCountdownStep(-1);\n    }\n  }, [gameId])\n\n  useEffect(() => {\n    if (gameStep === LOADED || gameStep === PAUSE_END) {\n      dispatch(makeCountdown());\n      setCountdownStep(COUNTDOWN_NUM);\n    }\n  }, [gameStep])\n\n  useEffect(() => {\n    if (countdownStep > 0) {\n      makeTimerTik();\n    } else if (countdownStep === 0) {\n      dispatch(finishCountdown());\n    }\n  }, [countdownStep])\n\n  return (\n    <div className={'wrapper ' + getVisibilityStatus()}>\n      <div className='content'>{generateContent()}</div>\n    </div>\n  )\n\n  function getVisibilityStatus() {\n    if ([LOADING, LOADED, COUNTDOWN, COUNTDOWN_END, FINISH].includes(gameStep)) {\n      return VISIBLE;\n    } else {\n      return INVISIBLE;\n    }\n  }\n\n  function generateContent() {\n    if (gameStep === LOADING || gameStep === LOADED) {\n      return <iframe title='spinner' src={process.env.PUBLIC_URL + '/spinner.html'}></iframe>\n    } else if (gameStep === COUNTDOWN || gameStep === COUNTDOWN_END) {\n      return <span className='countdown'>{(countdownStep === -1) ? 3 : countdownStep}</span>;\n    } else if (gameStep === FINISH) {\n      return <>\n        <span className='result-label'>Результат</span>\n        <span className='result'>{`${getPercentageResult(result, level)}%`}</span>\n      </>\n    } else {\n      return null;\n    }\n  }\n\n  function makeTimerTik() {\n    wrapperTimerId = setTimeout(() => {\n      setCountdownStep(prev => prev - 1);\n    }, COUNTDOWN_DELAY);\n  }\n}","import './Game.css'\nimport React, {useEffect, useRef} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Board} from \"../board/Board\";\nimport {\n  restartGame,\n  finishGame,\n  makePause,\n  startActivity,\n  finishPause\n} from \"../../store/gameSlice\";\nimport {Wrapper} from \"../wrapper/Wrapper\";\nimport {\n  PAUSE_TIME,\n  READY,\n  LOADED,\n  COUNTDOWN_END,\n  FINISH,\n  ACTIVITY,\n  LIST_LEN,\n  LOADING,\n  RESTART_GAME,\n  SHOW_MENU,\n  FINISH_GAME,\n  assistantObj,\n  PERMIT_CHOOSING, DENY_FINISHING, CHOOSE_ITEM, NO_ITEM,\n} from \"../../constants\";\nimport {addLastBtnInEnabledBtnList, getPercentageResult, setRemoteControllerConfig} from \"../../functions\";\n\n// id for setTimeout in game\nlet gameTimerId = null;\n\n// pause to memorize before countdown\nconst pause = () => {\n  return async (dispatch) => {\n    dispatch(makePause());\n    gameTimerId = setTimeout(() => {\n      dispatch(finishPause());\n    }, PAUSE_TIME);\n  }\n}\n\nexport function Game(props) {\n  const gameId = useSelector(state => state.game.gameId);\n  const gameStep = useSelector(state => state.game.step);\n  const level = useSelector(state => state.game.level);\n  const result = useSelector(state => state.game.result);\n  const prevGameStep = useSelector(state => state.game.prevStep);\n\n  const assistantData = useSelector(state => state.assistant.data);\n\n  const dispatch = useDispatch();\n\n  // refs for buttons\n  const restartBtn = useRef();\n  const menuBtn = useRef();\n  const resultBtn = useRef();\n\n  useEffect(() => {\n    // stop timeout actions\n    return () => {\n      if (gameTimerId) clearTimeout(gameTimerId);\n    }\n  }, [])\n\n  useEffect(() => {\n    resultBtn.current.disabled = true;\n\n    return () => {\n      if (gameTimerId) clearTimeout(gameTimerId);\n    }\n  }, [gameId])\n\n  useEffect(() => {\n    // retrieve next gameStep\n    if (gameStep === COUNTDOWN_END) {\n      if (prevGameStep === LOADED) {\n        dispatch(pause());\n      } else {\n        dispatch(startActivity());\n      }\n    } else if (gameStep === READY) {\n      resultBtn.current.disabled = false;\n    } else if (gameStep === FINISH) {\n      resultBtn.current.disabled = true;\n    }\n\n    // set remote controller configs for managing\n    if (gameStep === ACTIVITY) {\n      assistantObj.ref.sendData({action: {action_id: PERMIT_CHOOSING}})\n\n      setRemoteControllerConfig(true, LIST_LEN[level]);\n    } else if (gameStep === READY) {\n      addLastBtnInEnabledBtnList();\n    } else if (gameStep === LOADING || gameStep === FINISH) {\n      setRemoteControllerConfig(true);\n    }\n\n  }, [gameStep])\n\n\n  useEffect(() => {\n    if (assistantData.type === RESTART_GAME) {\n      restartHandler();\n    } else if (assistantData.type === SHOW_MENU) {\n      menuHandler();\n    } else if (assistantData.type === FINISH_GAME) {\n      if (gameStep === READY) {\n        resultHandler();\n      } else {\n        assistantObj.ref.sendData({action: {action_id: DENY_FINISHING}});\n      }\n    } else if (assistantData.type === CHOOSE_ITEM) {\n      const num = Number(assistantData.payload);\n      if (num <= 0 || num > LIST_LEN[level]) assistantData.sendData({action: {action_id: NO_ITEM}});\n    }\n  }, [assistantData])\n\n  return (\n    <div className=\"game\">\n      <Wrapper/>\n      <Board/>\n      <div className=\"bottom-interface\">\n        <button ref={restartBtn} className=\"btn game-btn managing-btn\" onClick={restartHandler}>Заново</button>\n        <button ref={menuBtn} className=\"btn game-btn managing-btn\" onClick={menuHandler}>Меню</button>\n        <button ref={resultBtn} className=\"btn game-btn managing-btn\" onClick={resultHandler}>Готово</button>\n      </div>\n    </div>\n  )\n\n  function menuHandler() {\n    assistantObj.ref.sendData({ action: { action_id: SHOW_MENU}});\n    props.changeAppScreen();\n  }\n\n  function restartHandler(event) {\n    assistantObj.ref.sendData({ action: { action_id: RESTART_GAME}});\n    dispatch(restartGame());\n  }\n\n  function resultHandler() {\n    assistantObj.ref.sendData({action: {action_id: FINISH_GAME, payload: getPercentageResult(result, level)}});\n    dispatch(finishGame());\n  }\n}","import {createSlice} from \"@reduxjs/toolkit\";\n\nconst assistantSlice = createSlice({\n  name: 'assistant',\n  initialState: {\n    clientAssistant: null,\n    data: {\n      type: 'init',\n      payload: null\n    }\n  },\n  reducers: {\n    changeAssistantData(state, action) {\n      state.data = action.payload;\n    }\n  }\n})\n\nexport default assistantSlice.reducer;\nexport const {changeAssistantData} = assistantSlice.actions;","import React, {useEffect, useState} from \"react\";\nimport {Menu} from \"./components/menu/Menu\";\nimport {Game} from \"./components/game/Game\";\nimport {orientationChangeHandler} from \"./functions\";\n\nimport { createAssistant, createSmartappDebugger } from '@sberdevices/assistant-client'\nimport {assistantObj, token} from \"./constants\";\nimport {useDispatch} from \"react-redux\";\nimport {changeAssistantData} from \"./store/assistantSlice\";\n\nconst initializeAssistant = (getState) => {\n  // for development\n  if (process.env.NODE_ENV === 'development') {\n    return createSmartappDebugger({\n      token: token,\n      initPhrase: 'Запусти тренажер памяти',\n      getState\n    });\n  }\n\n  // for production\n  createAssistant({ getState });\n}\n\nfunction App() {\n  const dispatch = useDispatch();\n  const [isMenuScreen, setIsMenuScreen] = useState(true);\n\n  useEffect(() => {\n    // add screen orientation change event listener\n    orientationChangeHandler();\n\n    // hook up client\n    assistantObj.ref = initializeAssistant(() => 'initialize');\n\n    assistantObj.ref.on('data', ({action}) => {\n      if (action) dispatch(changeAssistantData(action));\n    });\n  }, [])\n\n\n  if (isMenuScreen) {\n    return <Menu changeAppScreen={changeAppScreen}/>\n  } else {\n    return <Game changeAppScreen={changeAppScreen}/>\n  }\n\n  function changeAppScreen() {\n    setIsMenuScreen(state => !state);\n  }\n}\n\nexport default App\n","import {configureStore} from \"@reduxjs/toolkit\";\nimport gameReducer from \"./gameSlice\";\nimport assistantReducer from \"./assistantSlice\"\n\nconst store = configureStore({\n  reducer: {\n    game: gameReducer,\n    assistant: assistantReducer\n  }\n})\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport store from \"./store\";\nimport {Provider} from \"react-redux\";\n\n\nconst root = document.getElementById('root');\nReactDOM.render(\n  <Provider store={store}>\n    <App/>\n  </Provider>,\n  root\n);\n\n"],"sourceRoot":""}