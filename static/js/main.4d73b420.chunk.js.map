{"version":3,"sources":["constants.js","store/gameSlice.js","functions.js","components/menu/Menu.jsx","components/item/Item.jsx","components/board/Board.jsx","components/wrapper/Wrapper.jsx","components/game/Game.jsx","store/assistantSlice.js","App.jsx","store/index.js","index.js"],"names":["PATH","process","EASY","MIDDLE","HARD","LOADING","LOADED","PAUSE_END","COUNTDOWN","COUNTDOWN_END","ACTIVITY","READY","FINISH","COUNTDOWN_DELAY","COUNTDOWN_NUM","UNMARKED","CORRECT","WRONG","VISIBLE","INVISIBLE","LIST_LEN","_LIST_LEN","Object","defineProperty","SIMILAR_NUM","_SIMILAR_NUM","SHOW_MENU","START_GAME","FINISH_GAME","RESTART_GAME","PERMIT_CHOOSING","DENY_FINISHING","CHOOSE_ITEM","NO_ITEM","assistant","ref","gameSlice","createSlice","name","initialState","level","gameId","step","prevStep","undefined","reducers","startGame","state","action","payload","Date","now","restartGame","finishLoading","makePause","finishPause","makeCountdown","finishCountdown","startActivity","setReady","finishGame","setInitResult","result","changeResult","_gameSlice$actions","actions","getPercentageResult","Math","round","random","start","end","floor","generateList","_step","listLength","sameNum","generateSameItemsNum","repeatedItem","list","Array","fill","_iterator","_createForOfIteratorHelper","randomSeveral","s","n","done","value","err","e","f","similarIndexes","similarInd","similarItem","otherItem","SIMILAR_IMG_END","i","includes","repeatedItemNum","num","Set","generatedNum","has","add","from","getDifferentElemsNumOfTwoArrays","arr1","arr2","length","len","min","notSameElemsNum","max","considerRowsColsCount","itemsNum","screenOrientation","cols","rows","_ref2","_remoteControllerDeco","window","screen","orientation","type","btnList","enabledBtnList","currentElem","currentElemAmongEnabled","disabledFocusedElem","boardBtnNum","moveHandler","event","code","getNextVerticalElem","getNextHorizonElem","focus","removeFocusFromDisabledBtn","classList","remove","splice","indexOf","direction","nextElemAmongEnabled","nextElem","_btnList2","lastIsDisabled","arguments","boardItemsNum","blur","_btnList","_considerRowsColsCoun","_considerRowsColsCoun2","slicedToArray","push","apply","toConsumableArray","document","querySelectorAll","pop","map","_","index","addEventListener","btnInd","focused","onchange","currentScreenOrientation","_ref","remoteControllerDecorator","_remoteControllerDeco2","setRemoteControllerConfig","addLastBtnInEnabledBtnList","checkBoardBtn","orientationChangeHandler","Menu","props","dispatch","useDispatch","assistantData","useSelector","data","btnEasy","useRef","btnMiddle","btnHard","startGameHandler","sendData","action_id","current","disabled","changeAppScreen","useEffect","react_default","a","createElement","className","onClick","Item","_useState","useState","_useState2","itemMark","setItemMark","game","gameStep","prevGameStep","Number","imgInd","itemChoosingHandler","imgName","tabIndex","onLoad","imageIsLoaded","isRepeated","Board","itemsList","setItemsList","_useState3","_useState4","unloadedItemsNum","setUnloadedItemsNum","listObj","item","Item_Item","key","decreaseUnloadedImagesNum","concat","prev","wrapperTimerId","Wrapper","_useSelector","countdownStep","setCountdownStep","clearTimeout","setTimeout","title","src","Fragment","_regeneratorRuntime","exports","Op","prototype","hasOwn","hasOwnProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","record","__await","then","unwrapped","error","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","skipTempReset","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","gameTimerId","pause","asyncToGenerator","_callee","_context","_x","Game","restartBtn","menuBtn","resultBtn","restartHandler","menuHandler","resultHandler","Wrapper_Wrapper","Board_Board","assistantSlice","clientAssistant","changeAssistantData","initializeAssistant","getState","createAssistant","App","isMenuScreen","setIsMenuScreen","on","Menu_Menu","Game_Game","store","configureStore","reducer","gameReducer","assistantReducer","root","getElementById","ReactDOM","render","es","src_App"],"mappings":"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","file":"static/js/main.4d73b420.chunk.js","sourcesContent":["// images folder path\nexport const PATH = process.env.PUBLIC_URL + \"/images/\";\n\n// game levels\nexport const EASY = 'easy';\nexport const MIDDLE = 'middle';\nexport const HARD = 'hard';\n\n// game working steps\nexport const LOADING = 'loading';\nexport const LOADED = 'loaded';\nexport const PAUSE = 'pause';\nexport const PAUSE_END = 'pause_end';\nexport const COUNTDOWN = 'countdown';\nexport const COUNTDOWN_END = 'countdown_end';\nexport const ACTIVITY = 'activity';\nexport const READY = 'ready';\nexport const FINISH = 'finish';\n\n// time constants for game steps\nexport const PAUSE_TIME = 3000;\nexport const COUNTDOWN_DELAY = 1100;\nexport const COUNTDOWN_NUM = 3;\n\n// items marked and unmarked statuses\nexport const UNMARKED = 'unmarked';\nexport const CORRECT = 'correct';\nexport const WRONG = 'wrong';\n\n// visibility\nexport const VISIBLE = 'visible';\nexport const INVISIBLE = 'invisible';\n\n// possible images count\nexport const GENERAL = 20;\n\n// length of items list depends on level\nexport const LIST_LEN = {\n  [EASY]: 12,\n  [MIDDLE]: 20,\n  [HARD]: 20\n}\n\n// similar images edges in images list\nexport const SIMILAR_IMG_START = 1;\nexport const SIMILAR_IMG_END = 10;\n\n// similar images count\nexport const SIMILAR_NUM = {\n  [EASY]: 0,\n  [MIDDLE]: 4,\n  [HARD]: 9,\n}\n\n// screen orientation\nexport const PORTRAIT = 'portrait-primary';\nexport const LANDSCAPE = 'landscape-primary';\n\n\n// Sber token\nexport const token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZTFmNTQxODM0NzEwNjkyNzAzM2QwYTQ0ODFmMTNkNTJiMTA1N2NhMWNkY2I0OTg0ZGNiMWQxZjQzMzdhMzYyNTM5YmU5MjcwMDQyNjI5OCIsImF1ZCI6IlZQUyIsImV4cCI6MTY3MDUxMTM4NCwiaWF0IjoxNjcwNDI0OTc0LCJpc3MiOiJLRVlNQVNURVIiLCJ0eXBlIjoiQmVhcmVyIiwianRpIjoiNTNkMDA4NzAtMTZhNy00MjQyLTg4MzktNjMyMGQzODA4Yjk0Iiwic2lkIjoiMWYwNjkwNTUtMzNmZi00ZGFmLWE5MWYtZDhlOGZhNmUxOWQ4In0.qRT--TsevE-fm_sfKDWlJgNJ3dY9kMgEqlMRp75i57vKCrBTgQ32_ur99__FofnhurGvggmEJ3qxl4XXXEMD-6HEmXJQW3QKqaOL7LdMhJNw8K9JHmDKnrwENL_OsADgemfJunDELH1Cllh5c9WrBdh9GVSda9NWElhkfooIoWlH-3jRrh7Klo20UR74bDHa4Fm1vyPt_N-bwsRTlPJPNN7DfTkMgpLvpQIfQ44IM7PcEqIscZTr0E_7dU2CznpIKwL6Ra1Ls2aglFhx5yIyv7XRTSyUIfjneZDRLxY3eDHRFeTc9veasN4SVxIxAJuz3nKXOSs8gf2cwvz6pfVqqlPJmhWFMR5r5aX9pUHy4zyHwDCfFABriFZmgY61P8NZ0-v2x8vK68BgxDs_89FaahPABH_bMgTFqtBkLhfXV_xIbD9K5Qd9j7tiDEToKCYkePvfPhHTNsQlHWej4P2K97u3AFNoOeUrVuEVNhUa7AA8eIgy3tnGbczoW1FxftmxD_tn7Hh8GkQqFPCes-yIqrIprlsesJBDI5Nj01BC-5QsWyNP9FoYj1IpW27goUH1VOwnMMZcgIbWzUtHr1eBUN-LL_dgablgzzh8zo2Ei4Lx3uFfedPEwe7UwWypWixFUHMFj3rWEHYkiM3fbWqiB77YOb-V_9cBAhNr4k0Zh9k';\n\n// client commands\nexport const SHOW_MENU = 'show-menu';\nexport const START_GAME = 'start-game';\nexport const FINISH_GAME = 'finish-game';\nexport const RESTART_GAME = 'restart-game';\nexport const PERMIT_CHOOSING = 'permit-choosing';\nexport const DENY_FINISHING = 'deny-finishing';\nexport const CHOOSE_ITEM = 'choose-item';\nexport const NO_ITEM = 'no-item'\n\n\n// variable for assistant object\nexport const assistant = {ref: null};","import {createSlice} from \"@reduxjs/toolkit\";\nimport {\n  LOADING,\n  PAUSE,\n  COUNTDOWN,\n  ACTIVITY,\n  FINISH,\n  CORRECT,\n  READY,\n  LOADED,\n  COUNTDOWN_END,\n  PAUSE_END\n} from \"../constants\";\n\nconst gameSlice = createSlice({\n  name: \"game\",\n\n  initialState: {\n    level: null,\n    gameId: null,\n    step: LOADING,\n\n    prevStep: undefined\n  },\n\n  reducers: {\n    startGame(state, action) {\n      state.level = action.payload;\n      state.gameId = Date.now();\n      state.step = LOADING;\n\n      state.prevStep = undefined;\n    },\n\n    restartGame(state) {\n      state.gameId = Date.now();\n      state.step = LOADING;\n\n      state.prevStep = undefined;\n    },\n\n    finishLoading(state) {\n      state.step = LOADED;\n    },\n\n    makePause(state) {\n      state.prevStep = state.step;\n      state.step = PAUSE;\n    },\n\n    finishPause(state) {\n      state.step = PAUSE_END;\n    },\n\n    makeCountdown(state) {\n      state.prevStep = state.step;\n      state.step = COUNTDOWN;\n    },\n\n    finishCountdown(state) {\n      state.step = COUNTDOWN_END;\n    },\n\n    startActivity(state) {\n      state.prevStep = state.step;\n      state.step = ACTIVITY;\n    },\n\n    setReady(state) {\n      state.step = READY;\n    },\n\n    finishGame(state) {\n      state.step = FINISH;\n    },\n\n    setInitResult(state, action) {\n      state.result = action.payload;\n    },\n\n    changeResult(state, action) {\n      if (action.payload === CORRECT) {\n        state.result += 1;\n      } else {\n        state.result -= 1;\n      }\n    },\n  }\n})\n\nexport default gameSlice.reducer;\nexport const {startGame, restartGame, finishLoading, makePause, finishPause, makeCountdown,finishCountdown, startActivity, setReady, finishGame, setInitResult, changeResult} = gameSlice.actions;","import {\n  EASY,\n  GENERAL,\n  LIST_LEN,\n  MIDDLE,\n  PORTRAIT,\n  SIMILAR_IMG_END,\n  SIMILAR_IMG_START,\n  SIMILAR_NUM\n} from \"./constants\";\n\nexport const getPercentageResult = function(result, level) {\n  const percentageResult = Math.round(result / LIST_LEN[level] * 100);\n\n  return percentageResult;\n}\n\nexport const random = function (start, end) {\n  return Math.floor(Math.random() * (end - start + 1)) + start;\n}\n\n\n\n/* creating items' list\n------------------------------------------------------*/\nexport const generateList = function(level) {\n  const listLength = LIST_LEN[level];\n  const sameNum = generateSameItemsNum(level);\n\n  const repeatedItem = random(SIMILAR_IMG_START, SIMILAR_IMG_END);\n\n  const list = new Array(listLength).fill(null);\n  const sameIndexes = randomSeveral(0, listLength - 1, sameNum);\n\n  for (let ind of sameIndexes) {\n    list[ind] = repeatedItem;\n  }\n\n  const similarIndexes = randomSeveral(0, listLength - sameNum - 1, SIMILAR_NUM[level]);\n\n  let similarInd = 0;\n  let similarItem = repeatedItem;\n  let otherItem = SIMILAR_IMG_END + 1;\n  for (let i = 0; i < listLength; i++) {\n    if (!list[i]) {\n      if (similarIndexes.includes(similarInd)) {\n        similarItem += 1;\n        if (similarItem > SIMILAR_IMG_END) similarItem = 1;\n\n        list[i] = similarItem;\n      } else {\n        list[i] = otherItem;\n\n        otherItem += 1;\n        if (otherItem > GENERAL) otherItem = SIMILAR_IMG_END + 1;\n      }\n\n      similarInd++;\n    }\n  }\n  return {\n    list,\n    repeatedItem,\n    repeatedItemNum: sameNum\n  }\n}\n\nconst randomSeveral = function (start, end, num) {\n  let i = 0;\n  const result = new Set();\n  while (i < num) {\n    const generatedNum = random(start, end);\n    if (!result.has(generatedNum)) {\n      result.add(generatedNum);\n      i++;\n    }\n  }\n  return Array.from(result);\n}\n\n// generate same images number\nconst generateSameItemsNum = function(level) {\n  if (level === EASY) {\n    return random(3, 5)\n  } else if (level === MIDDLE) {\n    return random(6, 7)\n  } else {\n    return random(5, 6)\n  }\n}\n\nexport const getDifferentElemsNumOfTwoArrays = function (arr1, arr2) {\n  if (!arr1.length) return arr2.length;\n  else if (!arr2.length) return arr1.length;\n  else {\n    const len = Math.min(arr1.length, arr2.length);\n    let notSameElemsNum = Math.max(arr1.length, arr2.length) - len;\n\n    for (let i = 0; i < len; i++) {\n      if (arr1[i] !== arr2[i]) notSameElemsNum++;\n    }\n\n    return notSameElemsNum;\n  }\n}\n\n\n/* managing by remote controller\n------------------------------------------------------*/\n\nconst remoteControllerDecorator = function() {\n  let screenOrientation = window.screen.orientation.type;\n\n  let btnList = [];\n  let enabledBtnList = [];\n  let currentElem = -1;\n  let currentElemAmongEnabled = -1;\n  let disabledFocusedElem = null;\n\n  let boardBtnNum = 0;\n  let rows = undefined;\n  let cols = undefined;\n\n\n  const orientationChangeHandler = function() {\n    window.screen.orientation.onchange = () => {\n      const currentScreenOrientation = window.screen.orientation.type;\n      if (rows && currentScreenOrientation !== screenOrientation) {\n        [rows, cols] = [cols, rows];\n      }\n    }\n  }\n\n\n  const setRemoteControllerConfig = function(lastIsDisabled = false, boardItemsNum = 0) {\n    if (currentElem >= 0 && btnList[currentElem]) {\n      btnList[currentElem].blur();\n    }\n\n    disabledFocusedElem = null;\n    btnList = [];\n    if (boardItemsNum) {\n      [rows, cols] = considerRowsColsCount(boardItemsNum, screenOrientation);\n\n      btnList.push(...document.querySelectorAll('.img-btn'));\n    }\n\n    boardBtnNum = boardItemsNum;\n    btnList.push(...document.querySelectorAll('.managing-btn'));\n\n    currentElem = -1;\n    currentElemAmongEnabled = -1;\n\n    enabledBtnList = new Array(btnList.length).fill(0);\n    if (lastIsDisabled) enabledBtnList.pop();\n    enabledBtnList = enabledBtnList.map((_, index) => index);\n\n    document.addEventListener('keydown', moveHandler);\n  }\n\n  const addLastBtnInEnabledBtnList = function() {\n    enabledBtnList.push(btnList.length - 1);\n  }\n\n  const checkBoardBtn = function(btnInd) {\n    if (currentElem >= 0 && btnList[currentElem].focused) btnList[currentElem].blur();\n    if (btnList[disabledFocusedElem]) removeFocusFromDisabledBtn();\n\n    currentElem = btnInd;\n    currentElemAmongEnabled = enabledBtnList.indexOf(btnInd);\n\n    disabledFocusedElem = btnInd;\n    btnList[disabledFocusedElem].classList.add('disabled-focus');\n  }\n\n  const moveHandler = function(event) {\n\n    if (currentElem === -1) {\n      currentElem = 0;\n      currentElemAmongEnabled = 0;\n    } else {\n      switch (event.code) {\n        case 'ArrowDown':\n          getNextVerticalElem(1);\n          break;\n        case 'ArrowUp':\n          getNextVerticalElem(-1);\n          break;\n        case 'ArrowLeft':\n          getNextHorizonElem(-1);\n          break;\n        case 'ArrowRight':\n          getNextHorizonElem(1);\n          break;\n        default:\n          break;\n      }\n    }\n\n    if (!btnList[disabledFocusedElem]) btnList[currentElem].focus();\n  }\n\n  function removeFocusFromDisabledBtn() {\n    btnList[disabledFocusedElem].classList.remove('disabled-focus');\n    enabledBtnList.splice(enabledBtnList.indexOf(disabledFocusedElem), 1);\n\n    currentElemAmongEnabled = enabledBtnList.indexOf(currentElem);\n\n    disabledFocusedElem = null;\n  }\n\n  const getNextHorizonElem = function(direction) {\n    let nextElemAmongEnabled = currentElemAmongEnabled + direction;\n\n    if (nextElemAmongEnabled < 0) {\n      return;\n    } else if (nextElemAmongEnabled >= enabledBtnList.length) {\n      nextElemAmongEnabled = 0;\n    }\n\n    currentElemAmongEnabled = nextElemAmongEnabled;\n    currentElem = enabledBtnList[currentElemAmongEnabled];\n\n    if (btnList[disabledFocusedElem]) removeFocusFromDisabledBtn();\n  }\n\n  const getNextVerticalElem = function(direction) {\n    if (!boardBtnNum) {\n      getNextHorizonElem(direction);\n      return;\n    } else if (currentElem >= boardBtnNum) {\n      getNextHorizonElem(direction);\n      return;\n    }\n\n    let nextElem = currentElem;\n\n    do {\n      nextElem += cols * direction;\n    } while ((nextElem >= 0 && nextElem < boardBtnNum) && !enabledBtnList.includes(nextElem))\n\n    if (nextElem >= boardBtnNum) {\n      currentElem = boardBtnNum;\n      currentElemAmongEnabled = enabledBtnList.indexOf(currentElem);\n    } else if (nextElem >= 0 && nextElem !== currentElem) {\n      currentElem = nextElem;\n      currentElemAmongEnabled = enabledBtnList.indexOf(currentElem);\n    }\n\n    if (btnList[disabledFocusedElem]) removeFocusFromDisabledBtn();\n  }\n\n  return [setRemoteControllerConfig, addLastBtnInEnabledBtnList, checkBoardBtn, orientationChangeHandler];\n}\n\n\nconst considerRowsColsCount = function (itemsNum, screenOrientation) {\n  let cols = 0;\n  let rows = 0\n\n  if (itemsNum === LIST_LEN[EASY]) {\n    cols = 4;\n    rows = 3;\n  } else {\n    cols = 5;\n    rows = 4;\n  }\n\n  if (screenOrientation === PORTRAIT) {\n    [rows, cols] = [cols, rows];\n  }\n\n  return [rows, cols];\n}\n\nexport const [setRemoteControllerConfig, addLastBtnInEnabledBtnList, checkBoardBtn, orientationChangeHandler] = remoteControllerDecorator();\n","import './Menu.css';\nimport React, {useEffect, useRef} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {startGame} from \"../../store/gameSlice\";\nimport {assistant, EASY, MIDDLE, HARD, START_GAME} from \"../../constants\";\nimport {setRemoteControllerConfig} from \"../../functions\";\n\nexport function Menu(props) {\n  const dispatch = useDispatch();\n\n  const assistantData = useSelector(state => state.assistant.data);\n\n  const btnEasy = useRef();\n  const btnMiddle = useRef();\n  const btnHard = useRef();\n\n  useEffect(() => {\n    // set remote controller actions\n    setRemoteControllerConfig();\n  }, [])\n\n  useEffect(() => {\n    if (assistantData.type === START_GAME) {\n      startGameHandler(assistantData.payload);\n    }\n  }, [assistantData])\n\n  function startGameHandler(level) {\n    assistant.ref.sendData({ action: { action_id: START_GAME}});\n    btnEasy.current.disabled = btnMiddle.current.disabled = btnHard.current.disabled = true;\n    props.changeAppScreen();\n    dispatch(startGame(level));\n  }\n\n\n  return (\n    <div className=\"menu\">\n      <button ref={btnEasy} className=\"btn menu-btn managing-btn\" onClick={() => startGameHandler(EASY)}>Легкий уровень</button>\n      <button ref={btnMiddle} className=\"btn menu-btn managing-btn\" onClick={() => startGameHandler(MIDDLE)}>Средний уровень</button>\n      <button ref={btnHard} className=\"btn menu-btn managing-btn\" onClick={() => startGameHandler(HARD)}>Сложный уровень</button>\n    </div>\n  )\n}","import \"./Item.css\";\nimport React, {useEffect, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n  ACTIVITY,\n  UNMARKED,\n  CORRECT,\n  WRONG,\n  LOADING,\n  PATH,\n  READY, LOADED, COUNTDOWN, CHOOSE_ITEM, assistant, NO_ITEM, FINISH\n} from \"../../constants\";\nimport {changeResult, setReady} from \"../../store/gameSlice\";\nimport {checkBoardBtn} from \"../../functions\";\n\nexport function Item(props) {\n  const [itemMark, setItemMark] = useState(UNMARKED);\n\n  const level = useSelector(state => state.game.level);\n  const gameStep = useSelector(state => state.game.step);\n  const prevGameStep = useSelector(state => state.game.prevStep);\n\n  const assistantData = useSelector(state => state.assistant.data);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    setItemMark(UNMARKED);\n  }, [props])\n\n  useEffect(() => {\n    if (itemMark !== UNMARKED) {\n      dispatch(changeResult(itemMark));\n      if (gameStep === ACTIVITY) {\n        dispatch((setReady()));\n      }\n    }\n  }, [itemMark])\n\n  useEffect(() => {\n    if (assistantData.type === CHOOSE_ITEM) {\n      const num = Number(assistantData.payload);\n      if (num === props.imgInd) {\n        if (itemMark === UNMARKED) {\n          itemChoosingHandler();\n        }\n        else {\n          assistant.ref.sendData({action: {action_id: NO_ITEM}});\n        }\n      }\n    }\n  }, [assistantData])\n\n  return (\n    <div className={'item level-' + level + ' ' + itemMark}>\n      {(gameStep === LOADING || gameStep === LOADED || (gameStep === COUNTDOWN && prevGameStep === LOADED)) && <div className={'img-wrapper'}/>}\n\n      {(gameStep === FINISH && itemMark !== UNMARKED) && <div className={'img-wrapper finish-step ' + itemMark}/>}\n\n      {\n        (gameStep === ACTIVITY || gameStep === READY) &&\n        <button\n          disabled={(itemMark !== UNMARKED)}\n          className={'btn img-btn'}\n          onClick={itemChoosingHandler}\n        >\n          {props.imgInd}\n        </button>\n      }\n\n      {(!props.imgName) ? null : <object\n        tabIndex={-1}\n        type=\"image/svg+xml\"\n        data={PATH + props.imgName + \".svg\"}\n        className=\"img\"\n        onLoad={props.imageIsLoaded}\n      >\n        smile svg image\n      </object>}\n\n    </div>\n  )\n\n  function itemChoosingHandler() {\n    assistant.ref.sendData({action: {action_id: CHOOSE_ITEM}});\n\n    if (props.isRepeated) {\n      setItemMark(CORRECT);\n    } else {\n      setItemMark(WRONG);\n    }\n\n    checkBoardBtn(props.imgInd - 1);\n  }\n}\n","import \"./Board.css\";\nimport React, {useEffect, useRef, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {LIST_LEN} from \"../../constants\";\nimport {generateList, getDifferentElemsNumOfTwoArrays} from \"../../functions\";\nimport {Item} from \"../item/Item\";\nimport {finishLoading, setInitResult} from \"../../store/gameSlice\";\n\nexport function Board() {\n  const level = useSelector(state => state.game.level);\n  const gameId = useSelector(state => state.game.gameId);\n\n  const [itemsList, setItemsList] = useState(new Array(LIST_LEN[level]).fill(null));\n  const [unloadedItemsNum, setUnloadedItemsNum] = useState(-1);\n\n  const list = useRef([]);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const listObj = generateList(level);\n\n    setUnloadedItemsNum(getDifferentElemsNumOfTwoArrays(list.current, listObj.list));\n    list.current = listObj.list;\n\n    setItemsList(listObj.list.map((item, index) => {\n      return (\n        <Item\n          key={index}\n          imgName={item}\n          imgInd={index + 1}\n          isRepeated={item === listObj.repeatedItem}\n          imageIsLoaded={decreaseUnloadedImagesNum}\n        />\n      )\n    }))\n\n    // initialize game result\n    dispatch(setInitResult(LIST_LEN[level] - listObj.repeatedItemNum));\n\n  }, [gameId])\n\n  useEffect(() => {\n    if (!unloadedItemsNum) {\n      dispatch(finishLoading());\n    }\n  }, [unloadedItemsNum])\n\n\n  return (\n    <div className={`board level-${level}`}>\n      {itemsList}\n      </div>\n  )\n\n  function decreaseUnloadedImagesNum() {\n    setUnloadedItemsNum(prev => prev - 1);\n  }\n}","import './Wrapper.css';\nimport React, {useEffect, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n  COUNTDOWN, COUNTDOWN_DELAY,\n  COUNTDOWN_END,\n  COUNTDOWN_NUM,\n  FINISH,\n  INVISIBLE,\n  LOADED,\n  LOADING, PAUSE_END,\n  VISIBLE\n} from \"../../constants\";\nimport {finishCountdown, makeCountdown} from \"../../store/gameSlice\";\nimport {getPercentageResult} from \"../../functions\";\n\n// id for setTimeout\nlet wrapperTimerId = null;\n\nexport function Wrapper() {\n  const {level, step: gameStep, result, gameId} = useSelector(state => state.game);\n  const dispatch = useDispatch();\n\n  const [countdownStep, setCountdownStep] = useState(-1);\n\n  useEffect(() => {\n    return () => {\n      if (wrapperTimerId) clearTimeout(wrapperTimerId);\n      setCountdownStep(-1);\n    }\n  }, [gameId])\n\n  useEffect(() => {\n    if (gameStep === LOADED || gameStep === PAUSE_END) {\n      dispatch(makeCountdown());\n      setCountdownStep(COUNTDOWN_NUM);\n    }\n  }, [gameStep])\n\n  useEffect(() => {\n    if (countdownStep > 0) {\n      makeTimerTik();\n    } else if (countdownStep === 0) {\n      dispatch(finishCountdown());\n    }\n  }, [countdownStep])\n\n  return (\n    <div className={'wrapper ' + getVisibilityStatus()}>\n      <div className='content'>{generateContent()}</div>\n    </div>\n  )\n\n  function getVisibilityStatus() {\n    if ([LOADING, LOADED, COUNTDOWN, COUNTDOWN_END, FINISH].includes(gameStep)) {\n      return VISIBLE;\n    } else {\n      return INVISIBLE;\n    }\n  }\n\n  function generateContent() {\n    if (gameStep === LOADING || gameStep === LOADED) {\n      return <iframe title='spinner' src={process.env.PUBLIC_URL + '/spinner.html'}></iframe>\n    } else if (gameStep === COUNTDOWN || gameStep === COUNTDOWN_END) {\n      return <span className='countdown'>{(countdownStep === -1) ? 3 : countdownStep}</span>;\n    } else if (gameStep === FINISH) {\n      return <>\n        <span className='result-label'>Результат</span>\n        <span className='result'>{`${getPercentageResult(result, level)}%`}</span>\n      </>\n    } else {\n      return null;\n    }\n  }\n\n  function makeTimerTik() {\n    wrapperTimerId = setTimeout(() => {\n      setCountdownStep(prev => prev - 1);\n    }, COUNTDOWN_DELAY);\n  }\n}","import './Game.css'\nimport React, {useEffect, useRef} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Board} from \"../board/Board\";\nimport {\n  restartGame,\n  finishGame,\n  makePause,\n  startActivity,\n  finishPause\n} from \"../../store/gameSlice\";\nimport {Wrapper} from \"../wrapper/Wrapper\";\nimport {\n  PAUSE_TIME,\n  READY,\n  LOADED,\n  COUNTDOWN_END,\n  FINISH,\n  ACTIVITY,\n  LIST_LEN,\n  LOADING,\n  RESTART_GAME,\n  SHOW_MENU,\n  FINISH_GAME,\n  assistant,\n  PERMIT_CHOOSING, DENY_FINISHING, CHOOSE_ITEM, NO_ITEM,\n} from \"../../constants\";\nimport {addLastBtnInEnabledBtnList, getPercentageResult, setRemoteControllerConfig} from \"../../functions\";\n\n// id for setTimeout in game\nlet gameTimerId = null;\n\n// pause to memorize before countdown\nconst pause = () => {\n  return async (dispatch) => {\n    dispatch(makePause());\n    gameTimerId = setTimeout(() => {\n      dispatch(finishPause());\n    }, PAUSE_TIME);\n  }\n}\n\nexport function Game(props) {\n  const gameId = useSelector(state => state.game.gameId);\n  const gameStep = useSelector(state => state.game.step);\n  const level = useSelector(state => state.game.level);\n  const result = useSelector(state => state.game.result);\n  const prevGameStep = useSelector(state => state.game.prevStep);\n\n  const assistantData = useSelector(state => state.assistant.data);\n\n  const dispatch = useDispatch();\n\n  // refs for buttons\n  const restartBtn = useRef();\n  const menuBtn = useRef();\n  const resultBtn = useRef();\n\n  useEffect(() => {\n    // stop timeout actions\n    return () => {\n      if (gameTimerId) clearTimeout(gameTimerId);\n    }\n  }, [])\n\n  useEffect(() => {\n    resultBtn.current.disabled = true;\n\n    return () => {\n      if (gameTimerId) clearTimeout(gameTimerId);\n    }\n  }, [gameId])\n\n  useEffect(() => {\n    // retrieve next gameStep\n    if (gameStep === COUNTDOWN_END) {\n      if (prevGameStep === LOADED) {\n        dispatch(pause());\n      } else {\n        dispatch(startActivity());\n      }\n    } else if (gameStep === READY) {\n      resultBtn.current.disabled = false;\n    } else if (gameStep === FINISH) {\n      resultBtn.current.disabled = true;\n    }\n\n    // set remote controller configs for managing\n    if (gameStep === ACTIVITY) {\n      assistant.ref.sendData({action: {action_id: PERMIT_CHOOSING}})\n\n      setRemoteControllerConfig(true, LIST_LEN[level]);\n    } else if (gameStep === READY) {\n      addLastBtnInEnabledBtnList();\n    } else if (gameStep === LOADING || gameStep === FINISH) {\n      setRemoteControllerConfig(true);\n    }\n\n  }, [gameStep])\n\n\n  useEffect(() => {\n    if (assistantData.type === RESTART_GAME) {\n      restartHandler();\n    } else if (assistantData.type === SHOW_MENU) {\n      menuHandler();\n    } else if (assistantData.type === FINISH_GAME) {\n      if (gameStep === READY) {\n        resultHandler();\n      } else {\n        assistant.ref.sendData({action: {action_id: DENY_FINISHING}});\n      }\n    } else if (assistantData.type === CHOOSE_ITEM) {\n      const num = Number(assistantData.payload);\n      if (num <= 0 || num > LIST_LEN[level]) assistantData.sendData({action: {action_id: NO_ITEM}});\n    }\n  }, [assistantData])\n\n  return (\n    <div className=\"game\">\n      <Wrapper/>\n      <Board/>\n      <div className=\"bottom-interface\">\n        <button ref={restartBtn} className=\"btn game-btn managing-btn\" onClick={restartHandler}>Заново</button>\n        <button ref={menuBtn} className=\"btn game-btn managing-btn\" onClick={menuHandler}>Меню</button>\n        <button ref={resultBtn} className=\"btn game-btn managing-btn\" onClick={resultHandler}>Готово</button>\n      </div>\n    </div>\n  )\n\n  function menuHandler() {\n    assistant.ref.sendData({ action: { action_id: SHOW_MENU}});\n    props.changeAppScreen();\n  }\n\n  function restartHandler(event) {\n    assistant.ref.sendData({ action: { action_id: RESTART_GAME}});\n    dispatch(restartGame());\n  }\n\n  function resultHandler() {\n    assistant.ref.sendData({action: {action_id: FINISH_GAME, payload: getPercentageResult(result, level)}});\n    dispatch(finishGame());\n  }\n}","import {createSlice} from \"@reduxjs/toolkit\";\n\nconst assistantSlice = createSlice({\n  name: 'assistant',\n  initialState: {\n    clientAssistant: null,\n    data: {\n      type: 'init',\n      payload: null\n    }\n  },\n  reducers: {\n    changeAssistantData(state, action) {\n      state.data = action.payload;\n    }\n  }\n})\n\nexport default assistantSlice.reducer;\nexport const {changeAssistantData} = assistantSlice.actions;","import React, {useEffect, useState} from \"react\";\nimport {Menu} from \"./components/menu/Menu\";\nimport {Game} from \"./components/game/Game\";\nimport {orientationChangeHandler} from \"./functions\";\n\nimport { createAssistant, createSmartappDebugger } from '@sberdevices/assistant-client'\nimport {assistant, token} from \"./constants\";\nimport {useDispatch} from \"react-redux\";\nimport {changeAssistantData} from \"./store/assistantSlice\";\n\nconst initializeAssistant = (getState) => {\n  // for development\n  if (process.env.NODE_ENV === 'development') {\n    return createSmartappDebugger({\n      token: token,\n      initPhrase: 'Запусти тренажер памяти',\n      getState\n    });\n  }\n\n  // for production\n  return createAssistant({ getState });\n}\n\nfunction App() {\n  const dispatch = useDispatch();\n  const [isMenuScreen, setIsMenuScreen] = useState(true);\n\n  useEffect(() => {\n    // add screen orientation change event listener\n    orientationChangeHandler();\n\n    // hook up client\n    assistant.ref = initializeAssistant(() => 'initialize');\n\n    assistant.ref.on('data', ({action}) => {\n      if (action) dispatch(changeAssistantData(action));\n    });\n  }, [])\n\n\n  if (isMenuScreen) {\n    return <Menu changeAppScreen={changeAppScreen}/>\n  } else {\n    return <Game changeAppScreen={changeAppScreen}/>\n  }\n\n  function changeAppScreen() {\n    setIsMenuScreen(state => !state);\n  }\n}\n\nexport default App\n","import {configureStore} from \"@reduxjs/toolkit\";\nimport gameReducer from \"./gameSlice\";\nimport assistantReducer from \"./assistantSlice\"\n\nconst store = configureStore({\n  reducer: {\n    game: gameReducer,\n    assistant: assistantReducer\n  }\n})\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport store from \"./store\";\nimport {Provider} from \"react-redux\";\n\n\nconst root = document.getElementById('root');\nReactDOM.render(\n  <Provider store={store}>\n    <App/>\n  </Provider>,\n  root\n);\n\n"],"sourceRoot":""}